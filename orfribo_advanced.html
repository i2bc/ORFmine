<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Advanced run ORFribo - ORFmine Documentation</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Advanced run ORFribo";
        var mkdocs_page_input_path = "orfribo_advanced.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="index.html" class="icon icon-home"> ORFmine Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="index.html">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">ORFmine</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="orfmine_installation.html">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="orfmine_quickstart.html">Quick start</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="orfmine_example.html">Running example</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="orfmine_citations.html">Citations</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ORFtrack</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">ORFtrack presentation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="orftrack_description.html">Aims and general description</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="orftrack_orfdef.html">ORF definition</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="orftrack_annotation.html">ORF annotation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="orftrack_overlap.html">Overlap definition</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="orftrack_orf_extraction.html">ORF extraction</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Usage</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="orftrack_input.html">Inputs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="orftrack_run.html">ORF annotation with ORFtrack</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="orfget_run.html">ORF extraction with ORFget</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Parameters</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="orftrack_param.html">ORFtrack parameters</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="orfget_param.html">ORFget parameters</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ORFold</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">ORFold presentation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="Objective_orfold.html">Objective</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="How_it_works_orfold.html">How it works?</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Usage</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="Run_orfold.html">Basic run ORFold</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="Plot_orfold.html">Plots with ORFplot</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="Run_orfold_advanced.html">Advanced run ORFold</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Parameters</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="parameters_orfold.html">ORFold parameters</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="parameters_orfplot.html">ORFplot parameters</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ORFribo</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="#">ORFribo presentation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="orfribo_objectives.html">Objectives</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="How_it_works_orfribo.html">How it works</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Usage</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="orfribo_inputs.html">Inputs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="orfribo_configuration.html">ORFribo configuration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="orfribo_run.html">Basic run ORFribo</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="orfribo_advanced.html">Advanced run ORFribo</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="orfribo_outputs.html">Outputs</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ORFdate</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">ORFdate presentation</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="orfdate_objectives.html">Objectives</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="How_it_works_orfdate.html">How it works</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Usage</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="orfdate_inputs.html">Inputs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="orfdate_run.html">Run</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="orfdate_outputs.html">Outputs</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="orfdate_parameters.html">Parameters</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ORFmine Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html" class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>ORFribo &raquo;</li>
          <li>Usage &raquo;</li>
      <li>Advanced run ORFribo</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="run-on-multiple-datasets">Run on multiple datasets<a class="headerlink" href="#run-on-multiple-datasets" title="Permanent link">#</a></h2>
<p>ORFribo can handle multiple Ribosome Profiling datasets provided they correspond to the same genome. To do so, the user only need to store all the corresponding fastq files in the /fastq/ directory. ORFribo will treat all the datasets independently and will generate as <a href="orfribo_outputs.html#main-output-table">many output tables</a> as there are input fastq files. The generated main output tables are then merged together into a single table written in the /workdir/orfribo/RESULTS/Bam2Reads_genome_output/ and is named "all_samples_genome_meanXX_medianYY_reads_concatenated.tab".</p>
<p>We recall that the config.yaml file must be <a href="orfribo_configuration.html">completed</a> and stored in the /workdir/ directory of the container. One should note that the same parameters will be applied to all datasets.</p>
<p>If you want to add some files to your experiment when ORFribo is already done for some fastqs, just put the new fastqs in the /fastq/ folder and launch the analysis again. ORFribo is smart enough (!) to only execute the needed steps for your analysis. The same logic applies if you change some parameters in the configuration file <i>config.yaml</i> or change the input files. If a file is modified in any way by the user or if a newer one takes its place, the downstream steps of the pipeline based on the modified file will be executed but no more (based on files' timestamp).
For example, you can also wait for the analysis to be finished, then change the selection thresholds in your configuration file and start ORFribo again. The new outputs will be created only after the necessary steps will be made, without trimming the adapters and aligning the reads on the genome's sequence once again.</p>
<p><a name="CDS"></a></p>
<h2 id="probing-the-translation-activity-of-cdss">Probing the translation activity of CDSs<a class="headerlink" href="#probing-the-translation-activity-of-cdss" title="Permanent link">#</a></h2>
<p>ORFmine is ORF-centered (i.e. ORFs defined from STOP-to-STOP), thus the ORFtrack output, that is used by most of ORFmine tools including ORFribo for the read mapping, only contains ORFs as defined by ORFtrack. Consequently, the ORFtrack output contains ORFs that include a CDS or CDS exons but not the real intronless CDSs (ATG-STOP) as defined in the original annotation gff file. If the user wants to probe the translation of CDSs, he/she therefore needs to extract the information that is stored in the outputs of step 2 (the kmer quality control performed on CDSs). To do so, the user has to identify for the studied dataset (e.g. dataset_XYZ), the retained kmers which are stored in this file: /workdir/orfribo/RESULTS/selected_tables/threshold_meanXX_medianXX/dataset_XYZ.txt. This file lists all the retained kmers. The CDS read counts are written in the corresponding tables stored in /workdir/orfribo/RESULTS/ORFribo/Bam2Reads_exome_output/dataset_XYZ_kmer_i/ with kmer_i standing for the retained kmers. The user thus needs to pool the corresponding count tables into a single table of same format as <a href="./orfibo_outputs.md#main_table">the final output</a> through our script as described below.</p>
<p>If for example, for the dataset_XYZ for which the retained kmers were the 27mers, 28mers and 31mers, the user can pool all the count tables based on the mapping of the 27-, 28- and 31mers as follows:</p>
<pre><code class="language-python">python3 /ORFmine/orfribo/RiboDoc_BAM2Reads/tools/Bam2Reads_function/concatenate.py -tables /workdir/orfribo/RESULTS/ORFribo/Bam2Reads_exome_output/dataset_XYZ_27/exome.25-35_reads.tab  /workdir/orfribo/RESULTS/ORFribo/Bam2Reads_exome_output/dataset_XYZ_28/exome.25-35_reads.tab  /workdir/orfribo/RESULTS/ORFribo/Bam2Reads_exome_output/dataset_XYZ_31/exome.25-35_reads.tab -outpath /workdir/orfribo/ -outname CDS_translation_XYZ.tab
</code></pre>
<p>The resulting table contains for each CDS, the numbers and frequencies of reads in its F0, F1 anf F2 frames.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="orfribo_run.html" class="btn btn-neutral float-left" title="Basic run ORFribo"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="orfribo_outputs.html" class="btn btn-neutral float-right" title="Outputs">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="orfribo_run.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="orfribo_outputs.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme_extra.js" defer></script>
    <script src="js/theme.js" defer></script>
      <script src="js/extra.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
